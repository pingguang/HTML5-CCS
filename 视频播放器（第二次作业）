# HTML5-CCS3<!DOCTYPE html>
<html>
<meta charset=gb2312" />
<div>
	<div>
		<video id="video" src="4_1.mp4" width="600">��ǰ�������֧��videoԪ��</video>
	</div>
	<div id="progressTime" style="display:none">
		<div style="float:left">
		<progress id="progress" max="100" style="width:450px">
		</progress>
		</div>
		<div id="showTime" style="float:left;margin-left:15px"></div>
		<div style="clear:both"></div>
	</div>
	</div>
	<div>
		<input type="button" id ="btnPlay" onclick="playOrPause()" value="����"/> 
		<input type="button" id="btnSpeedUp" onclick="speedUp()" value="���" /> 
		<input type="button" id="btnSpeedUpDown" onclick="speedDown()" value="����" /> 
		<input type="button" id="btnVolumeUp" onclick="volumeUp()" value="�������" /> 
		<input type="button"  id="btnVolumeDown" onclick="volumeDown()" value="��������" /> 
	</div>
</div>
<script>
var speed=1; //�����ٶ�
var volume=1; //��������
var video=document.getElementById("video");
var playBtn=document.getElementById("btnPlay");
var btnSpeedUp=document.getElementById("btnSpeedUp");
var btnSpeedUpDown=document.getElementById("btnSpeedUpDown");
var btnVolumeUp=document.getElementById("btnVolumeUp");
var btnVolumeDown=document.getElementById("btnVolumeDown");
var showTime=document.getElementById("showTime");

video.addEventListener('timeupdate',updateProgress,false); //Ϊ����������ʱ��ı�����¼�
var progress=document.getElementById("progress");
progress.onclick=progressOnClick; //Ϊprogress�ؼ����ӵ���¼�

//���Ż���ͣ
function playOrPause()
{
	var progressTime=document.getElementById("progressTime");
	progressTime.style.display=""; //��ʾ���Ž�������ʱ��
	if(video.paused) //�����ǰ����״̬Ϊ��ͣ�������ʼ����
	{
		playBtn.value="��ͣ";
		video.play();
		video.playbackRate=speed;
		video.volume=volume;
		//���ÿ��ƹ�����������ť
		btnSpeedUp.disabled="";
		btnSpeedUpDown.disabled="";
		btnVolumeUp.disabled="";
		btnVolumeDown.disabled="";
	}
	else //�����ǰ����״̬Ϊ���ţ��������ͣ����
	{
		playBtn.value="����";
		video.pause();
		//���ÿ�����������ť
		btnSpeedUp.disabled="disabled";
		btnSpeedUpDown.disabled="disabled";
		btnVolumeUp.disabled="disabled";
		btnVolumeDown.disabled="disabled";
	}	
}
//��߲����ٶ�
function speedUp()
{
	if(video.playbackRate<1)
	{
		video.playbackRate*=2;	
	}
	else if(video.playbackRate>=1)
	{
		video.playbackRate+=1;			 
	}									 
	speed=video.playbackRate;
    alert("��ǰ���ŵ��ٶ�Ϊ��"+speed);
}
//���Ͳ����ٶ�
function speedDown()
{
	if(video.playbackRate<=1)
	{
		video.playbackRate/=2;	
	}
	if(video.playbackRate>1)
	{
		video.playbackRate-=1;			 
	}			 
	speed=video.playbackRate;
	alert("��ǰ���ŵ��ٶ�Ϊ��"+speed);									 
}
//��������
function volumeUp()
{
	if(video.volume<1)
	{
		video.volume+=0.1;
		if(video.volume>0)
		{
			video.muted=false;
		}
	}
	volume=video.volume;
}
//��������
function volumeDown()
{
	if(video.volume>0)
	{
		video.volume-=0.1;
		if(video.volume==0)
		{
			video.muted=true;
		}
	}
	volume=video.volume;
}
//���Ž���������¼��������ӵ��λ�ÿ�ʼ����
function progressOnClick(event)
{
	var progress=document.getElementById("progress");
	if(event.offsetX) //��ȡ��굱ǰ���λ���뵱ǰλ����ȴ���ƫ����
	{
		video.currentTime=video.duration*(event.offsetX/progress.clientWidth); //�趨�������µĲ���λ��
	}
	else
	{
		video.currentTime=video.duration*(event.clientX/progress.clientWidth);
	}
}
//���½�����״̬
function updateProgress()
{
	var currentPercent=Math.round(Math.floor(video.currentTime)/Math.floor(video.duration)*100,0);//���㵱ǰ����ʱ������Ƶ��ʱ��֮��
	var progress=document.getElementById("progress");
	progress.value=currentPercent;
	showTime.innerHTML=calculateTime(Math.floor(video.currentTime))+"/"+calculateTime(Math.floor(video.duration));//��ʾ����ʱ��
}
//����ǰ�����ʱ��ת��Ϊhh:MM:ss�ĸ�ʽ
function calculateTime(time)
{
	var h;
	var m;
	var s;
	h=String(parseInt(time/3600,10));
	if(h.length==1)
	{
		h='0'+h;
	}
	m=String(parseInt((time%3600)/60,10));
	if(m.length==1)
	{
		m='0'+m;
	}
	s=String(parseInt(time%60),10)
	if(s.length==1)
	{
		s='0'+s;
	}
	return h+":"+m+":"+s;
}
</script>
</html>
